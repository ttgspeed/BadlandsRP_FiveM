<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Bootstrap Core CSS -->
    <link href="css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom CSS -->
    <link href="css/shop-homepage.css" rel="stylesheet">

		<script src="js/jquery.js" type="text/javascript"></script>

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

</head>

<body>
	<img id="cursor" src="cursor.webp" style="position: absolute; display:none; z-index: 99;">
    <!-- Navigation -->
    <nav class="navbar navbar-inverse navbar-fixed-top" role="navigation" style='z-index: 1'>
        <div class="container">
            <!-- Brand and toggle get grouped for better mobile display -->
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <b class="navbar-brand">Press ESC to close.</b>
            </div>
            <!-- Collect the nav links, forms, and other content for toggling -->
            <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                <ul class="nav navbar-nav">
                    <li>
                        <a href="#" style='' id='select-cat-home'>Home</a>
                    </li>
                </ul>
            </div>
            <!-- /.navbar-collapse -->
        </div>
        <!-- /.container -->
    </nav>

    <!-- Page Content -->
    <div class="container">

        <div class="row">

					<div class="col-md-3">
							<p class="lead">Categories</p>
							<div class="list-group">
									<a href="#" style="border-radius: 0;" class="list-group-item" id='select-cat-job'>Job Vehicles</a>
									<a href="#" style="border-radius: 0;" class="list-group-item" id='select-cat-compacts'>Compact Cars</a>
									<a href="#" style="border-radius: 0;" class="list-group-item" id='select-cat-coupe'>Coupes</a>
									<a href="#" style="border-radius: 0;" class="list-group-item" id='select-cat-sports'>Sports Cars</a>
									<a href="#" style="border-radius: 0;" class="list-group-item" id='select-cat-sportsclassics'>Sports Classic Cars</a>
									<!--<a href="#" style="border-radius: 0;" class="list-group-item" id='select-cat-supercars'>Super Cars</a>-->
                  <a href="#" style="border-radius: 0;" class="list-group-item" id='select-cat-musclecars'>Muscle Cars</a>
                  <a href="#" style="border-radius: 0;" class="list-group-item" id='select-cat-off-road'>Offroad Vehicles</a>
                  <a href="#" style="border-radius: 0;" class="list-group-item" id='select-cat-suvs'>SUVs</a>
                  <a href="#" style="border-radius: 0;" class="list-group-item" id='select-cat-vans'>Vans</a>
                  <a href="#" style="border-radius: 0;" class="list-group-item" id='select-cat-sedans'>Sedans</a>
									<a href="#" style="border-radius: 0;" class="list-group-item" id='select-cat-motorcycles'>Motorcycles</a>
                  <a href="#" style="border-radius: 0;" class="list-group-item" id='select-cat-taxi'>Taxis</a>
                  <a href="#" style="border-radius: 0;" class="list-group-item" id='select-cat-police'>Police Vehicles</a>
                  <a href="#" style="border-radius: 0;" class="list-group-item" id='select-cat-emergency'>Emergency Vehicles</a>
                  <a href="#" style="border-radius: 0;" class="list-group-item" id='select-cat-bicycles'>Bicycles</a>
							</div>
					</div>

            <div class="col-md-8">

                <div id="home" class="row carousel-holder">

                    <div class="col-md-12">
											<div class="jumbotron">
												<h2><b>First-Class Cars</b></h2>
												<p>Welcome to your garage! Here you can purschase vehicles and spawn the ones you already own. Select a catery to begin!</p>
											</div>
                    </div>

                </div>

                <div class="row">

								<div id="job-vehicles">
                  <div class="col-sm-4 col-lg-4 col-md-4" id="buy_mule">
                      <div class="thumbnail">
                          <img src="cars/mule.webp" alt="">
                          <div class="caption">
                              <h4 class="pull-right">$2,000</h4>
                              <h4><b>Mule</b>
                              </h4>
                              <p>The mule, a truckers dream. Also required for trucking jobs.</p>
                          </div>
                          <div class="ratings">
                              <p class="pull-right">9 reviews</p>
                              <p>
                                  <span class="glyphicon glyphicon-star"></span>
                                  <span class="glyphicon glyphicon-star"></span>
                                  <span class="glyphicon glyphicon-star"></span>
                                  <span class="glyphicon glyphicon-star"></span>
                                  <span class="glyphicon glyphicon-star"></span>
                              </p>
                          </div>
                      </div>
                  </div>
                </div>

                <div id="compacts-vehicles">
                </div>

                <div id="coupe-vehicles">
                </div>

                <div id="sports-vehicles">
                </div>

                <div id="sportsclassics-vehicles">
                </div>

                <!--<div id="supercars-vehicles">
                </div>-->

                <div id="musclecars-vehicles">
                </div>

                <div id="off-road-vehicles">
                </div>

                <div id="suvs-vehicles">
                </div>

                <div id="vans-vehicles">
                </div>

                <div id="sedans-vehicles">
                </div>

                <div id="motorcycles-vehicles">
                </div>

                <div id="taxi-vehicles">
                </div>

                <div id="police-vehicles">
                </div>

                <div id="emergency-vehicles">
                </div>

                <div id="bicycles-vehicles">
                </div>

            </div>

        </div>

    </div>
    <!-- /.container -->

    <div class="container">

        <hr>

        <!-- Footer -->
        <footer>
            <div class="row">
                <div class="col-lg-12">
                    <p>Copyright &copy; Insert random company</p>
                </div>
            </div>
        </footer>

    </div>
    <!-- /.container -->

    <!-- jQuery -->
    <script src="js/jquery.js"></script>

    <!-- Bootstrap Core JavaScript -->
    <script src="js/bootstrap.min.js"></script>

		<script>
		var documentWidth = document.documentElement.clientWidth;
		var documentHeight = document.documentElement.clientHeight;

		var cursor = document.getElementById("cursor");
		var cursorX = documentWidth / 2;
		var cursorY = documentHeight / 2;

		function UpdateCursorPos() {
		    $(cursor).css('left', cursorX)
		    $(cursor).css('top', cursorY)
		}

		function Click(x, y) {
		    var element = $(document.elementFromPoint(x - window.pageXOffset, y - window.pageYOffset));
		    element.focus().click();
		}

		function buyVehicle(gar,veh){
			$.post('http://es_carshop/buy_vehicle', JSON.stringify({garage:gar,vehicle: veh}));
		}

    function testmessage(message){
			$.post('http://es_carshop/testmessage', JSON.stringify({text:message}));
		}

		$(function() {
			$(cursor).css('display', "none")
			$("body").css('display', "none")
			$("body").css('background', 'none')
		    window.addEventListener('message', function(event) {
		        if (event.data.type == "enableui") {
		            $(cursor).css('display', event.data.enable ? "block" : "none")
		            $("body").css('display', event.data.enable ? "block" : "none")
		            $("body").css('background', event.data.enable ? "white" : "none")

		        } else if (event.data.type == "click") {
		            // Avoid clicking the cursor itself, click 1px to the top/left;
		            Click(cursorX - 1, cursorY - 1);
		        } else if (event.data.type == "vehicles") {
                for(var i in event.data.enable) {
                    $("#buy_" + i).find(".caption").find(".pull-right").html("Owned")
                }
            } else if (event.data.type == "vehicle") {
                $("#buy_" + event.data.garage + "_" + event.data.vehicle).find(".caption").find(".pull-right").html("Owned")
            } else if (event.data.type == "vehicleList") {
                $("[id^=buy_]").not('[id*=mule]').remove();
                garages = JSON.parse(event.data.vehicles)
                for(var garage in garages) {
                    var carGarage = garages[garage]
                    for(var car in carGarage) {
                        var template = '<div class="col-sm-4 col-lg-4 col-md-4" id="buy_'+garage+'_'+car+'">' +
                                          '<div class="thumbnail">' +
                                              '<img src="cars/elegy2.webp" alt="">' +
                                              '<div class="caption">' +
                                                  '<h4 class="pull-right">$'+garages[garage][car][1].toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",")+'</h4>' +
                                                  '<h4><b>'+garages[garage][car][0]+'</b>' +
                                                  '</h4>' +
                                                  '<p>A good drifting vehicle.</p>' +
                                              '</div>' +
                                              '<div class="ratings">' +
                                                  '<p class="pull-right">74 reviews</p>' +
                                                  '<p>' +
                                                      '<span class="glyphicon glyphicon-star"></span>' +
                                                      '<span class="glyphicon glyphicon-star"></span>' +
                                                      '<span class="glyphicon glyphicon-star"></span>' +
                                                      '<span class="glyphicon glyphicon-star"></span>' +
                                                  '</p>' +
                                              '</div>' +
                                          '</div>' +
                                      '</div>'
                        $("#"+garage+"-vehicles").append(template);
                    }
                }
            }
		    });

		    $(document).mousemove(function(event) {
		        cursorX = event.pageX;
		        cursorY = event.pageY;
		        UpdateCursorPos();
		    });

		    document.onkeyup = function (data) {
		        if (data.which == 27) { // Escape key
		            $.post('http://es_carshop/escape', JSON.stringify({}));
		        }
		    };

        $(document).on("click", "[id^=buy_]", function(e){
            vehicle = $(this).attr("id").split('_')
            buyVehicle(vehicle[1],vehicle[2])
        });

				// Tabs

				function hide(){
					$("#home").css('display', 'none')
					$("[id$=-vehicles]").css('display', 'none')
				}
				hide()

				function selectCat(cat){
					hide()
          if(cat == "home"){
            $("#home").css('display', 'block')
          } else {
            $("#"+cat+"-vehicles").css('display', 'block')
          }
				}
				selectCat("home")

        $('#select-cat-home').click(function(){ selectCat("home") })
				$('#select-cat-job').click(function(){ selectCat("job") })
        $('#select-cat-compacts').click(function(){ selectCat("compacts") })
        $('#select-cat-coupe').click(function(){ selectCat("coupe") })
        $('#select-cat-sports').click(function(){ selectCat("sports") })
        $('#select-cat-sportsclassics').click(function(){ selectCat("sportsclassics") })
        //$('#select-cat-supercars').click(function(){ selectCat("supercars") })
        $('#select-cat-musclecars').click(function(){ selectCat("musclecars") })
        $('#select-cat-off-road').click(function(){ selectCat("off-road") })
        $('#select-cat-suvs').click(function(){ selectCat("suvs") })
        $('#select-cat-vans').click(function(){ selectCat("vans") })
        $('#select-cat-sedans').click(function(){ selectCat("sedans") })
        $('#select-cat-motorcycles').click(function(){ selectCat("motorcycles") })
        $('#select-cat-taxi').click(function(){ selectCat("taxi") })
        $('#select-cat-police').click(function(){ selectCat("police") })
        $('#select-cat-emergency').click(function(){ selectCat("emergency") })
        $('#select-cat-bicycles').click(function(){ selectCat("bicycles") })
		});
		</script>

</body>

</html>
